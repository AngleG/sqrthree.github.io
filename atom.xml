<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[sqrtthree]]></title>
  <subtitle><![CDATA[O ever youthful, O ever weeping.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://blog.sqrtthree.com/"/>
  <updated>2015-10-04T16:21:41.000Z</updated>
  <id>http://blog.sqrtthree.com/</id>
  
  <author>
    <name><![CDATA[sqrtthree]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[春风十里 不如你]]></title>
    <link href="http://blog.sqrtthree.com/2015/10/05/without-you-im-nothing/"/>
    <id>http://blog.sqrtthree.com/2015/10/05/without-you-im-nothing/</id>
    <published>2015-10-04T16:21:41.000Z</published>
    <updated>2015-10-04T16:21:41.000Z</updated>
    <content type="html"><![CDATA[<p>每一个失恋了的人, 都是中了一记玄冥神掌.</p>
<p>这掌力在你每一次听到情歌的时候发作, 歌词句句都是毒素攻心. 这掌力在每一次夜深的时候发作, 无孔不入的孤独直入骨髓, 痛的满地打滚.</p>
<a id="more"></a>
<p>是的, 你不得不承认, 兜兜转转, 到最后, 你终于还是把她弄丢了.</p>
<p>这些日子, 你天天梦到她, 常常半夜醒来不知道自己身在何处, 常常早上望着空荡荡的枕边失落. </p>
<p>现在, 你都害怕再梦到她了吧.</p>
<p>夜深的时候, 你总是望着窗外发呆, 你幻想联系她后的复合, 你幻想联系她后的决裂, 你幻想如果当初没有分开现在会如何, 你幻想此时此刻她正在干嘛.</p>
<p>可是, 你也只能够是想想.</p>
<p>因为我知道, 你不敢, 也不能联系她.</p>
<p>说来可笑, 你会把联系她视为一次定输赢的赌博. 你想赌, 但你不敢赌, 因为你知道自己会输. </p>
<p>输了, 以后连想她的权利都没有了.</p>
<p>你不是没有想过放弃. 你今天决定放弃她了, 可是坚持不了几天, 又不甘心放弃想把她追回来.</p>
<p>周而复始, 永远下不了决心到底是放弃还是坚持.</p>
<p>熬过了无数个痛苦的黑夜, 你不再嘴上逞强, 你终于承认了你爱她, 即使分开了, 你对她的爱却有增无减.</p>
<p>你相信了念念不忘必有回响这样的段子.</p>
<p>你相信梦见她证明你俩缘分未尽这样的迷信.</p>
<p>你相信打喷嚏突然恍惚是因为她正在想你这样的习惯.</p>
<p>是的, 即便你之前觉得这样多可笑, 这一刻, 你都会强行认为是跟你有关.</p>
<p>可惜的是,</p>
<p>你的想念没有声音, 恐怕她是听不到了.</p>
<p>你的想念没有频率, 也许她也收不到了.</p>
<p>你的想念没有路径, 所以只能你自己知道了.</p>
<p>我知道你好想做一万件事来证明你很想她.</p>
<p>但是很可惜你一件也为她做不了.</p>
<p>最遗憾的事大概就是,</p>
<p>你有为她做一万件事的决心, 却没有能为她做一件事的机会了.</p>
<p>而你唯一能做的也只能是在这平淡无味的生活间隙里，</p>
<p>想一想此时此刻的她正在做什么了.</p>
<p>失去了她, 你觉得, 整个世界都空旷旷的. 你觉得, 整个世界都变成了黑白的, 再也没有了色彩.</p>
<p>孤独, 就像是那暴风雨一样骤然而来, 让你触不及防, 狼狈不堪.</p>
<p>可是, 最可怕的不是孤独本身, 而是没有人知道你孤独.</p>
<p>你喝的烂醉, 最后还是得一个人爬回床上, 她不会知道了.</p>
<p>你生病了, 最后还是得一个人滚去医院, 她不会陪你了.</p>
<p>你萎靡不振, 最后在荒度的日子里把自己淬炼成了一个傻逼, 她不会出现了.</p>
<p>是啊, 以后的路上, 就只有你自己了. 她, 永远都不会出现了.</p>
<p>我知道你放不下, 我知道你不甘心,</p>
<p>可是, 又能怎么办呢？</p>
<p>只希望你能在未来的日子里沉迷于学习无法自拔, 习得九阳神功, 破了这寒毒.</p>
<p>因为, </p>
<p>有些事情, 只适合珍藏.</p>
<p>终有一天,</p>
<p>你回过头, 再看到这篇文章的时候,</p>
<p>你会对我说:</p>
<p>你看这个人, 真的好像一条狗耶.</p>
<hr>
<embed src="http://music.163.com/style/swf/widget.swf?sid=26508242&type=2&auto=1&width=320&height=66" width="340" height="86" allownetworking="all">
]]></content>
    <summary type="html">
    <![CDATA[<p>每一个失恋了的人, 都是中了一记玄冥神掌.</p>
<p>这掌力在你每一次听到情歌的时候发作, 歌词句句都是毒素攻心. 这掌力在每一次夜深的时候发作, 无孔不入的孤独直入骨髓, 痛的满地打滚.</p>]]>
    
    </summary>
    
      <category term="生活" scheme="http://blog.sqrtthree.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[谈谈我理解的API接口设计]]></title>
    <link href="http://blog.sqrtthree.com/2015/09/08/api/"/>
    <id>http://blog.sqrtthree.com/2015/09/08/api/</id>
    <published>2015-09-08T05:03:43.000Z</published>
    <updated>2015-09-08T05:03:43.000Z</updated>
    <content type="html"><![CDATA[<p>随着web 技术的发展, 前端技术在 web 开发中占着越来越重的比重. 尤其是最近出现的 AngularJS/React 等框架的出现, 让开发 SPA 应用类的开发方式产生了巨大的革新. 在开发过程中, 前后端的数据交互也变得越来越密切. 再加上层出不穷的各种终端设备, 我们迫切需要一个统一的 api 接口规范设计. 主要参考了Github 的 API 设计规范, 我按照自己的理解总结了一下.</p>
<a id="more"></a>
<h2 id="关于协议">关于协议</h2><p>为了确保通信安全, 建议API与用户的通信协议，总是使用HTTPS协议.</p>
<h2 id="关于域名">关于域名</h2><p>为了提高可维护性, 建议尽量将API部署在专用域名之下. 如 <code>https://api.github.com</code></p>
<h2 id="关于版本号">关于版本号</h2><p>建议将 API 的版本号放入 URL 中, 如<code>https://api.github.com/v1/</code>. 但是 Github 似乎采用了另外一种方案, 就是将版本号放在了HTTP头信息中, <a href="https://developer.github.com/v3/media/#request-specific-version" target="_blank" rel="external">看这里看这里</a>. 但个人感觉不是太直观. 但前端在请求中可以省略3个字符. <em>(:з」∠)</em></p>
<h2 id="关于请求路径">关于请求路径</h2><p>RESTful API是目前比较成熟的一套互联网应用程序的API设计理论. 在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词. 并且建议所用的名词和数据库中的集合名相对应. 并且在获取一组数据/集合的时候, 应统一使用复数形式.</p>
<p>比如, 需要请求所有的用户信息. 可以设计为这样: <code>https://api.example.com/v1/users</code>.</p>
<h2 id="关于请求方法">关于请求方法</h2><p>常用的 HTTP请求方法有5个. 分别如下:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td style="text-align:center">从服务器取出资源</td>
</tr>
<tr>
<td>POST</td>
<td style="text-align:center">在服务器新建一个资源</td>
</tr>
<tr>
<td>PUT</td>
<td style="text-align:center">用于完整的替换资源或者创建指定身份的资源(更新资源)</td>
</tr>
<tr>
<td>PATCH</td>
<td style="text-align:center">用于局部更新资源</td>
</tr>
<tr>
<td>DELETE</td>
<td style="text-align:center">用于删除某个资源</td>
</tr>
</tbody>
</table>
<p>比如:</p>
<ul>
<li>GET <code>/users</code> 列出所有的用户</li>
<li>GET <code>/users/:ID</code> 列出指定用户的信息</li>
<li>POST <code>/users</code> 新建一个用户</li>
<li>DELETE <code>/users/:ID</code> 删除指定的用户</li>
</ul>
<p>也可以使用语义化的路径方式进行分类, 如:</p>
<ul>
<li>GET <code>/users</code> 列出所有的用户</li>
<li>POST <code>/users/create</code> 创建一个新用户</li>
<li>POST <code>/users/update</code> 更新信息</li>
</ul>
<h2 id="关于常见的请求参数">关于常见的请求参数</h2><p>比如在数据过多, 需要对数据进行分页请求的时候, 我们应该统一 API 请求参数. 常见的有这些.</p>
<ul>
<li><code>limit=10</code> 指定返回记录的数量</li>
<li><code>offset=10</code> 指定返回记录的开始位置。</li>
<li><code>page=2&amp;per_page=100</code> 指定第几页，以及每页的记录数。</li>
<li><code>sortby=name&amp;order=asc</code> 指定返回结果按照哪个属性排序，以及排序顺序。</li>
<li><code>animal_type_id=1</code> 指定筛选条件</li>
</ul>
<h2 id="关于返回值">关于返回值</h2><p>返回值的数据格式应严格按照 JSON 规范.JSON（JavaScript Object Notation）是一种轻量级，基于文本，语言无关的数据交换格式。其包括了基本数据类型4种和复合数据类型2种，共6种数据类型.</p>
<p>首先. 基本数据类型有:</p>
<ul>
<li>Number可以表示整数和浮点数。</li>
<li>Boolean可以表示真假，值为true或false。</li>
<li>String表示一个字符串。</li>
<li>Null通常用于表示空对象. 输出的数据结构中空字段的值一律为 null.</li>
</ul>
<p>复合数据类型Object是无序的集合，以键值对的方式保持数据。</p>
<ol>
<li><p>必须根据操作和状态设置相应的 HTTP 响应状态码. 具体可参考<a href="http://tools.ietf.org/html/rfc7231#page-49" target="_blank" rel="external">http://tools.ietf.org/html/rfc7231#page-49</a>、<a href="http://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="external">http://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81</a></p>
</li>
<li><p>Content-Type字段定义了响应体的类型. 一般情况下，浏览器会根据该类型对内容进行正确的处理。推荐设置为”text/javascript”或”text/plain”. 并且通常需要指定一个字符集, 如果字符编码为UTF-8时，可以不指定字符集</p>
</li>
<li><p>返回的数据包含在http响应体中。数据 必须(MUST) 是一个JSON Object。该Object可能包含3个字段：status，statusInfo，data。</p>
</li>
<li><p>status字段必须是一个不小于0的JSON Number整数，表示请求的状态. 0：表示server端理解了请求，成功处理并返回. 非0：表示发生错误, 可以根据错误类型扩展错误码.</p>
</li>
<li><p>statusInfo字段通常是一个JSON String或JSON Object，表示除了请求状态外server端想要对status做出的说明，使client端能够获取更多信息进行后续处理. 这个字段属于可选字段.</p>
</li>
<li><p>data 字段可以是任意 JSON 类型, 表示请求返回的数据主体. 数据主体data包含了在请求成功时有意义的数据.</p>
</li>
</ol>
<p>例如: </p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 请求成功</span><br><span class="line">&#123;</span><br><span class="line">    status: <span class="number">0</span>,</span><br><span class="line">    statusInfo: <span class="string">'请求成功'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: <span class="string">'Tom'</span>,</span><br><span class="line">        ag: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 请求失败</span><br><span class="line">&#123;</span><br><span class="line">    status: <span class="number">1</span>,</span><br><span class="line">    statusInfo: <span class="string">'权限不足'</span></span><br><span class="line">    // 或者是复杂类型</span><br><span class="line">    statusInfo: &#123;</span><br><span class="line">        <span class="string">'text'</span>: <span class="string">'参数错误'</span>,</span><br><span class="line">        <span class="string">'parameters'</span>: &#123;</span><br><span class="line">            <span class="string">"email"</span>: <span class="string">"电子邮件格式不正确"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="关于文档规范">关于文档规范</h2><p>可参考 github 的文档写作形式.</p>
<p>1、 请求信息<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET <span class="string">'/users'</span> 获取用户列表 <span class="comment">// 请求方式, 请求路径, 方法描述</span></span><br></pre></td></tr></table></figure></p>
<p>2、 请求参数</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>参数一</td>
<td>参数类型</td>
<td>参数描述</td>
</tr>
</tbody>
</table>
<p>3、 Response 响应结果示例<br>给出不同状态的响应结果示例, 便于接口对接和调试.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    status: <span class="number">0</span>,</span><br><span class="line">    statusInfo: '请求成功',</span><br><span class="line">    <span class="typedef"><span class="keyword">data</span>: [<span class="container">&#123;</span><br><span class="line">        <span class="title">id</span>: 1,</span><br><span class="line">        <span class="title">name</span>: '<span class="type">Tom</span>'</span><br><span class="line">    &#125;</span>]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>随着web 技术的发展, 前端技术在 web 开发中占着越来越重的比重. 尤其是最近出现的 AngularJS/React 等框架的出现, 让开发 SPA 应用类的开发方式产生了巨大的革新. 在开发过程中, 前后端的数据交互也变得越来越密切. 再加上层出不穷的各种终端设备, 我们迫切需要一个统一的 api 接口规范设计. 主要参考了Github 的 API 设计规范, 我按照自己的理解总结了一下.</p>]]>
    
    </summary>
    
      <category term="api" scheme="http://blog.sqrtthree.com/tags/api/"/>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[解决 Javascript 中 atob 方法解码中文字符乱码问题]]></title>
    <link href="http://blog.sqrtthree.com/2015/08/29/utf8-to-b64/"/>
    <id>http://blog.sqrtthree.com/2015/08/29/utf8-to-b64/</id>
    <published>2015-08-29T11:46:53.000Z</published>
    <updated>2015-08-29T11:46:53.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>今天在写一个通过 GitHub API 获取README 的功能的时候, 由于返回值为 Base64 编码, 我在尝试用 js 转换为 UFT-8 的时候发现中文会导致乱码. 在这里总结一下相关的知识点吧.</p>
</blockquote>
<h2 id="首先,_为什么要编码？">首先, 为什么要编码？</h2><p>由于一些网络通讯协议的限制, 又或者是出于信息加密的目的, 我们就需要将原信息转换为 base64 编码,然后才能进行传输.例如，发送某些含有 ASCII 码表中 0 到 31 之间的控制字符的数据。</p>
<p>通常的方法是通过 <code>window.btoa()</code> 方法对源数据进行编码, 然后接收方使用 <code>window.atob()</code> 方法对其进行解码, 从而得到原数据.</p>
<a id="more"></a>
<h2 id="window-btoa_与_window-atob_不支持中文">window.btoa 与 window.atob 不支持中文</h2><p>但是这种方法存在的问题是:<code>window.btoa()</code> 不支持中文, <code>window.atob()</code>转换含有中文的 base64编码的时候中文部分会变为乱码.详情如下:</p>
<p>我们在 bash 终端下先得到『中文』这两个字的 base64 编码</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo 中文 <span class="string">| base64</span></span><br><span class="line"><span class="number">5</span>Lit5paHCg==</span><br></pre></td></tr></table></figure>
<p>然后我们在 Chrome console 里面通过 <code>window.atob</code> 进行解码, 结果如下</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">window</span>.atob(<span class="string">'5Lit5paHCg=='</span>)</span><br><span class="line">&lt; <span class="string">"ä¸­æ</span><br><span class="line">"</span></span><br></pre></td></tr></table></figure>
<p>继续在 Chrome console 里面执行 <code>window.btoa</code> 编码, 结果报错.</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"> window.btoa(</span>'中文'<span class="function">)</span>;</span><br><span class="line">&lt; Uncaught DOMException: Failed to<span class="instruction"> execute </span>'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.</span><br></pre></td></tr></table></figure>
<p>经查资料发现, <code>btoa</code> 方法仅支持 ASCII 编码.</p>
<h2 id="借助_encodeURIComponent_和_decodeURIComponent_转义中文字符">借助 encodeURIComponent 和 decodeURIComponent 转义中文字符</h2><p>由于<code>btoa</code> 方法仅支持 ASCII 编码, 我们在转换中文的时候就需要先将中文转换为ASCII字符序列，再通过 btoa 进行 base64 编码, 从而实现『曲线救国』。</p>
<p>转换ASCII字符序列的方法我们可以借助于 <code>encodeURIComponent</code> 和 <code>decodeURIComponent</code> 这两个方法完成. </p>
<p>编码:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; window.<span class="function"><span class="title">btoa</span><span class="params">(encodeURIComponent(<span class="string">'中文'</span>)</span></span>)</span><br><span class="line">&lt; <span class="string">"JUU0JUI4JUFEJUU2JTk2JTg3"</span></span><br></pre></td></tr></table></figure></p>
<p>解码:<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; decodeURIComponent<span class="list">(<span class="keyword">window</span>.atob<span class="list">(<span class="quoted">'JUU0JUI4JUFEJUU2JTk2JTg3</span>')</span>)</span></span><br><span class="line">&lt; <span class="string">"中文"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="GitHub_API_获取_README_的中文乱码问题">GitHub API 获取 README 的中文乱码问题</h2><p>但是通过上面的解码方式解码 github 的 readme 数据的时候仍旧是乱码, 经过查找相关资料发现了Base64的编码与解码转的最优方案是下面这种:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">utf8_to_b64</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.btoa(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(str)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b64_to_utf8</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(<span class="built_in">escape</span>(<span class="built_in">window</span>.atob(str)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage:</span></span><br><span class="line">utf8_to_b64(<span class="string">'✓ à la mode'</span>); <span class="comment">// JTI1dTI3MTMlMjUyMCUyNUUwJTI1MjBsYSUyNTIwbW9kZQ==</span></span><br><span class="line">b64_to_utf8(<span class="string">'JTI1dTI3MTMlMjUyMCUyNUUwJTI1MjBsYSUyNTIwbW9kZQ=='</span>); <span class="comment">// "✓ à la mode"</span></span><br><span class="line"></span><br><span class="line">utf8_to_b64(<span class="string">'I \u2661 Unicode!'</span>); <span class="comment">// SSUyNTIwJTI1dTI2NjElMjUyMFVuaWNvZGUlMjUyMQ==</span></span><br><span class="line">b64_to_utf8(<span class="string">'SSUyNTIwJTI1dTI2NjElMjUyMFVuaWNvZGUlMjUyMQ=='</span>); <span class="comment">// "I ♡ Unicode!"</span></span><br></pre></td></tr></table></figure>
<p>通过上面的这种方法去解析 github 的数据的时候, 发现中文能够正常显示了. 显然 github 也是采用了这种方案.</p>
<h2 id="参考阅读">参考阅读</h2><ul>
<li><a href="https://developer.mozilla.org/en/docs/Web/API/WindowBase64/Base64_encoding_and_decoding" target="_blank" rel="external">https://developer.mozilla.org/en/docs/Web/API/WindowBase64/Base64_encoding_and_decoding</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/btoa" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/btoa</a></li>
</ul>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>今天在写一个通过 GitHub API 获取README 的功能的时候, 由于返回值为 Base64 编码, 我在尝试用 js 转换为 UFT-8 的时候发现中文会导致乱码. 在这里总结一下相关的知识点吧.</p>
</blockquote>
<h2 id="首先,_为什么要编码？">首先, 为什么要编码？</h2><p>由于一些网络通讯协议的限制, 又或者是出于信息加密的目的, 我们就需要将原信息转换为 base64 编码,然后才能进行传输.例如，发送某些含有 ASCII 码表中 0 到 31 之间的控制字符的数据。</p>
<p>通常的方法是通过 <code>window.btoa()</code> 方法对源数据进行编码, 然后接收方使用 <code>window.atob()</code> 方法对其进行解码, 从而得到原数据.</p>]]>
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端开发模板引擎 -- Jade之神奇的 mixins 和模板继承]]></title>
    <link href="http://blog.sqrtthree.com/2015/08/20/jade-04/"/>
    <id>http://blog.sqrtthree.com/2015/08/20/jade-04/</id>
    <published>2015-08-20T08:04:18.000Z</published>
    <updated>2015-08-20T08:04:18.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>文章首发于前端乱炖社区, 现在搬迁过来了. <a href="http://www.html-js.com/article/2596" target="_blank" rel="external">http://www.html-js.com/article/2596</a></p>
</blockquote>
<h2 id="1、神奇的_mixins">1、神奇的 <code>mixins</code></h2><p>想必有 <code>less</code> &amp; <code>sass</code> 经验的同学对 <code>mixins</code> 一定都不陌生了，<code>mixins</code> 呢，其实就是方便对一堆代码块的重复利用。在 <code>Jade</code> 里面当然也少不了代码块的复用咯~~</p>
<a id="more"></a>
<p><code>mixins</code> 的定义很简单，就只需要 <code>mixin 代码块名字</code> 即可<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mixin demo</span><br><span class="line">  <span class="tag">p</span> this is <span class="tag">a</span> demo</span><br></pre></td></tr></table></figure><br>调用方式就更简单了，我们需要这样 <code>+代码块名字</code><br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+demo</span></span><br></pre></td></tr></table></figure><br>输出结果非常理想<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>什么？你说这都是只能用于内容固定的代码块？没关系，我们来看看内容不固定的时候应该怎么办<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mixin</span> <span class="built_in">info</span>(name, skills)</span><br><span class="line">  p my name is <span class="comment">#&#123;name&#125;</span></span><br><span class="line">  ul.skills-box</span><br><span class="line">    each skill in skills</span><br><span class="line">      li <span class="comment">#&#123;skill&#125;</span></span><br><span class="line"></span><br><span class="line">+<span class="built_in">info</span>(<span class="string">'sqrtthree'</span>,[<span class="string">'html'</span>,<span class="string">'css'</span>,<span class="string">'javascript'</span>,<span class="string">'nodejs'</span>])</span><br></pre></td></tr></table></figure><br>编译结果如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>my name is sqrtthree<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"skills-box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>html<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>css<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>nodejs<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>什么？你还想要嵌套的 <code>mixins</code>，╮(╯▽╰)╭  怎么这么多事。。<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mixin info(<span class="property">name</span>, skills)</span><br><span class="line">  p <span class="keyword">my</span> <span class="property">name</span> <span class="keyword">is</span> <span class="comment">#&#123;name&#125;</span></span><br><span class="line">  ul.skills-box</span><br><span class="line">    each skill <span class="keyword">in</span> skills</span><br><span class="line">      li <span class="comment">#&#123;skill&#125;</span></span><br><span class="line"></span><br><span class="line">mixin developersInfo(developer)</span><br><span class="line">  h2 <span class="comment">#&#123;developer.name&#125;</span></span><br><span class="line">  +info(developer.<span class="property">name</span>, developer.skills)</span><br><span class="line"></span><br><span class="line">+developersInfo(&#123;<span class="string">"name"</span>: <span class="string">"sqrtthree"</span>, <span class="string">"skills"</span>: ['html','css','javascript','nodejs']&#125;)</span><br></pre></td></tr></table></figure><br>编译结果是这个样子的<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">h2</span>&gt;</span>sqrtthree<span class="tag">&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>my name is sqrtthree<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"skills-box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>html<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>css<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>nodejs<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><br>那如果我们遇到不定参的问题呢<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mixin</span> <span class="built_in">info</span>(className, ...skills)</span><br><span class="line">  ul(class=<span class="string">'#&#123;className&#125;'</span>)</span><br><span class="line">    each skill in skills</span><br><span class="line">      li <span class="comment">#&#123;skill&#125;</span></span><br><span class="line"></span><br><span class="line">+<span class="built_in">info</span>(<span class="string">'list'</span>,<span class="string">'html'</span>,<span class="string">'css'</span>,<span class="string">'javascript'</span>,<span class="string">'nodejs'</span>)</span><br></pre></td></tr></table></figure><br>我们来看编译结果<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>html<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>css<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>nodejs<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>变量都能传递了，那属性能传递么？<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mixin attr(<span class="type">text</span>)</span><br><span class="line">  p(<span class="type">class</span>=attributes.<span class="type">class</span>) <span class="comment">#&#123;text&#125;</span></span><br><span class="line"></span><br><span class="line">+attr('<span class="type">text</span>')(<span class="type">class</span>=<span class="string">"tips"</span>)</span><br></pre></td></tr></table></figure><br>结果如下：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p <span class="type">class</span>=<span class="string">"tips"</span>&gt;<span class="type">text</span>&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>属性传递的时候还有一个语法糖呢。<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mixin attr(<span class="type">text</span>)</span><br><span class="line">  p&amp;attributes(attributes) <span class="comment">#&#123;text&#125;</span></span><br><span class="line"></span><br><span class="line">+attr('demo')(<span class="type">class</span>=<span class="string">"tips"</span>, <span class="property">id</span>=<span class="string">"j-tips"</span>, data-<span class="property">id</span>=<span class="string">"18"</span>)</span><br></pre></td></tr></table></figure><br>我们来看编译结果是什么样的<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p <span class="property">id</span>=<span class="string">"j-tips"</span> data-<span class="property">id</span>=<span class="string">"18"</span> <span class="type">class</span>=<span class="string">"tips"</span>&gt;<span class="type">text</span>&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>mixins</code> 还有一个高级用法，那就是内联代码块。先上例子<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mixin</span> code(text)</span><br><span class="line"> p <span class="comment">#&#123;text&#125;</span></span><br><span class="line"> <span class="keyword">if</span> <span class="keyword">block</span></span><br><span class="line">  <span class="keyword">block</span></span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  p no <span class="keyword">block</span>.</span><br><span class="line"></span><br><span class="line">+code('this <span class="keyword">is</span> a demo')</span><br><span class="line">  p this <span class="keyword">is</span> a <span class="keyword">block</span>.</span><br></pre></td></tr></table></figure><br>编译结果如下：<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;p&gt;</span>this is a demo<span class="variable">&lt;/p&gt;</span></span><br><span class="line"><span class="variable">&lt;p&gt;</span>this is a <span class="built_in">block</span>.<span class="variable">&lt;/p&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>从上面的代码中，我们可以看出，我们在调用<code>+code</code>的时候给他设置一个代码块 <code>p this is a block</code>，那么在 <code>mixins</code> 里面，程序会自动把这个代码块的内容传递给 <code>block</code> 变量。然后我们可以通过判断进行相应的操作。</p>
<h2 id="2、模板的继承">2、模板的继承</h2><p>我们在做整站开发时，通常每一个页面的头部和底部都是一样的，之前我们的做法可能是写完一个之后然后不断的复制粘贴，但是现在我们有了 <code>Jade</code>之后，来看看我们可以怎么做？<br>在 <code>Jade</code> 里面，我们通过 <code>block</code> 和 <code>extends</code> 这两个关键字实现模板之间的继承，一个代码块可以看成是 <code>Jade</code> 中的一个 <code>block</code>，我们将在子模板中实现<br>我们先看一个小例子，定义一个简单的代码块<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">block demo</span><br><span class="line">  <span class="tag">p</span> this is <span class="tag">a</span> demo.</span><br></pre></td></tr></table></figure><br>默认情况下，代码块的内容是会被输出的<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo.&lt;/p&gt;</span><br></pre></td></tr></table></figure><br>在同一个文件中，我们可以直接通过这种方式进行调用<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">block</span> demo</span><br><span class="line">  p this <span class="keyword">is</span> a demo.</span><br><span class="line"><span class="keyword">block</span> demo</span><br><span class="line"><span class="keyword">block</span> demo</span><br><span class="line"><span class="keyword">block</span> demo</span><br></pre></td></tr></table></figure><br>结果是这样的<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a demo.&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>那么如果是不同文件之间，如何进行调用呢？<br>比如我们有一个 <code>layout.jade</code> 文件，内容是这样的。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">doctype <span class="tag">html</span></span><br><span class="line"><span class="tag">html</span></span><br><span class="line">  head</span><br><span class="line">    title this is <span class="tag">a</span> demo.</span><br><span class="line">  <span class="tag">body</span></span><br><span class="line">    <span class="tag">h1</span> demo.</span><br><span class="line"></span><br><span class="line">    block cont</span><br></pre></td></tr></table></figure><br>然后呢，我们有一个 <code>demo.jade</code>文件是这样的<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">extends layout	<span class="comment">// 这里的 layout 指的是需要继承的模板文件</span></span><br><span class="line"></span><br><span class="line">block cont</span><br><span class="line">  <span class="tag">h2</span> Look, this is <span class="tag">a</span> demo.</span><br><span class="line">  <span class="tag">p</span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure><br>然后我们通过命令行工具编译 <code>demo.jade</code> 文件，结果是神奇的<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>this is a demo.<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>demo.<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">h2</span>&gt;</span>Look, this is a demo.<span class="tag">&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">p</span>&gt;</span>this is a paragraph.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>怎么样？是不是觉得很方便呢？</p>
<p>模板的继承解决了多个文件之间代码复用的问题，其实上面我们提到的页头和页脚我们用模板包含的方式可能更合适一些，下面我们来看一看模板的包含.</p>
<p><code>includes</code> 允许你静态包含一段 <code>Jade</code>, 或者别的存放在单个文件中的东西比如 <code>css</code> <code>html</code>。<br>比如我们有一个 <code>footer.jade</code> 文件，他里面有着这样的内容<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">div<span class="id">#footer</span></span><br><span class="line">  <span class="tag">p</span> copyright.</span><br></pre></td></tr></table></figure><br>然后我们在我们的 <code>demo.jade</code> 文件中这样使用<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">doctype <span class="tag">html</span></span><br><span class="line"><span class="tag">html</span></span><br><span class="line">  head</span><br><span class="line">    title this is <span class="tag">a</span> demo.</span><br><span class="line">  <span class="tag">body</span></span><br><span class="line">    <span class="tag">h1</span> Hello, World.</span><br><span class="line"></span><br><span class="line">    include footer</span><br></pre></td></tr></table></figure><br>编译结果是这个样子的<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">DOCTYPE</span> <span class="attribute">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>this is a demo.<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello, World.<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"footer"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">p</span>&gt;</span>copyright.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>当然，通过 <code>includes</code> 引入 <code>css</code> 代码也是一样的。大家可以尝试一下，我这里就不举例子了。</p>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[写一些我所知道的 jade 语法]]>
    
    </summary>
    
      <category term="jade" scheme="http://blog.sqrtthree.com/tags/jade/"/>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端开发模板引擎 -- Jade之数据的动态传递和流程控制]]></title>
    <link href="http://blog.sqrtthree.com/2015/08/20/jade-03/"/>
    <id>http://blog.sqrtthree.com/2015/08/20/jade-03/</id>
    <published>2015-08-20T07:58:08.000Z</published>
    <updated>2015-08-20T07:58:08.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>文章首发于前端乱炖社区, 现在搬迁过来了. <a href="http://www.html-js.com/article/2585" target="_blank" rel="external">http://www.html-js.com/article/2585</a></p>
</blockquote>
<p>前面介绍了一些 <code>Jade</code> 的简单用法，这篇文章为大家讲一下 <code>Jade</code> 中如何进行数据的动态传递和流程控制，干货来咯~</p>
<h2 id="1、Jade_中简单的变量定义和使用">1、<code>Jade</code> 中简单的变量定义和使用</h2><p>我们在写 <code>html</code> 静态页面的过程中，免不了会碰到一些需要动态注入的地方，一般的写法就略显麻烦，那么我们有了 <code>Jade</code> 之后呢，不啰嗦了，我们从最简单的例子开始：</p>
<a id="more"></a>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    title Hello,World.</span><br><span class="line">  body</span><br><span class="line">    -<span class="ruby"> var title = <span class="string">'sqrtthree.com'</span>;</span><br><span class="line"></span>    p welcome to #&#123;<span class="ruby">title&#125;</span></span><br></pre></td></tr></table></figure>
<p>我想我们大概能够想象出编译结果：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello,World.<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">p</span>&gt;</span>welcome to sqrtthree.com<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>从上面的代码中我们可以看出，在 <code>Jade</code> 中进行数据传递非常简单：</p>
<ol>
<li>通过<code>-</code> + <code>空格</code>开始，作为标记在 <code>Jade</code> 中定义变量</li>
<li>通过 <code>#{变量名}</code> 进行输出和调用即可.</li>
</ol>
<p>那要是我们就只是想输出 <code>#{}</code>的时候该怎么办呢？转义咯~<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p welcome to \#&#123;<span class="ruby">title&#125;</span>	// =&gt; &lt;p&gt;welcome to #&#123;<span class="ruby">title&#125;</span>&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>另外，在 <code>Jade</code> 里面我们就可以通过这种方式使用 <code>js</code>的语法了，比如这样：(为了看着方便，我就直接在后面写出关键行的编译结果了)<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var title = <span class="string">'sqrtthree.com'</span>;</span><br><span class="line"></span>p welcome to #&#123;<span class="ruby">title.toUpperCase()&#125;</span>		// =&gt; &lt;p&gt;welcome to SQRTTHREE.COM&lt;/p&gt;</span><br></pre></td></tr></table></figure><br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var title = <span class="string">'sqrtthree.com'</span>;</span><br><span class="line"></span>p welcome to #&#123;<span class="ruby">title.charAt(<span class="number">0</span>)&#125;</span>		// =&gt; &lt;p&gt;welcome to s&lt;/p&gt;</span><br></pre></td></tr></table></figure><br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var title = <span class="string">'sqrtthree.com'</span>;</span><br><span class="line"></span>p welcome to #&#123;<span class="ruby">title.substring(<span class="number">0</span>,<span class="number">4</span>)&#125;</span>	// =&gt; &lt;p&gt;welcome to sqrt&lt;/p&gt;</span><br></pre></td></tr></table></figure><br>怎么样？有没有觉得很简单呢。</p>
<p>但是呢，我们在工作中是很少直接在文件中这样直接定义变量值的，通常都是在后台读取到值然后设置到页面中，那我们现在没有后台该怎么办呢？还记得第一篇文章中我们说过的 <code>Jade</code> 命令行工具么？我们可以在 <code>Jade</code> 为我们提供的命令行工具中直接传递数据，话不多说，继续上代码：</p>
<p>我们通过如下的命令编译下面的 <code>Jade</code> 文件，为了方便查看，就只显示部分的编译结果<br><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jade <span class="transposed_variable">test.</span>jade  -P --obj <span class="string">'&#123;"</span>title<span class="string">": "</span>sqrtthree<span class="string">"&#125;'</span></span><br></pre></td></tr></table></figure><br><code>Jade</code> 文件如下：<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    title welcome</span><br><span class="line">  body</span><br><span class="line">    p welcome to <span class="preprocessor">#&#123;title&#125;		// =&gt; <span class="title">&lt;p&gt;</span>welcome to sqrtthree<span class="title">&lt;/p&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>那么问题就来了，如果我们在命令行中和文件中定义了相同名字的变量，那究竟是显示哪一个变量的值呢？<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    title welcome</span><br><span class="line">  body</span><br><span class="line">    -<span class="ruby"> var title = <span class="string">'sqrtthree.com'</span></span><br><span class="line"></span>    p welcome to #&#123;<span class="ruby">title&#125;</span>		// =&gt; &lt;p&gt;welcome to sqrtthree.com&lt;/p&gt;</span><br></pre></td></tr></table></figure><br>根据编译结果显示，在文件中定义的值把之前外部传入的值替换掉了。</p>
<p>其实上面的方式中有一个坑不知道大家发现没有，就是通常我们传入数据的时候都不会只传一个的，那如果需要传入很多的数据的话，怎么还能够这么写呢？反正换我我是绝逼会崩溃的。</p>
<p><code>Jade</code> 也支持传入 <code>json</code> 文件的方式进行数据传递的, 例如我们在项目里新建一个 <code>data.json</code> 文件，格式如下：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">title</span>": <span class="value"><span class="string">"根号三的博客"</span></span>,</span><br><span class="line">  "<span class="attribute">href</span>": <span class="value"><span class="string">"sqrtthree.com"</span></span>,</span><br><span class="line">  "<span class="attribute">cont</span>": <span class="value"><span class="string">"我可耻，我打了个硬广。^_^"</span></span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure><br>这里我们就要在命令行里执行另一个参数的命令了<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jade test<span class="class">.jade</span>  -P -O data<span class="class">.json</span>		<span class="comment">// 注意，O 为英文大写</span></span><br></pre></td></tr></table></figure><br>页面和编译结果分别为:<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    title welcome #&#123;<span class="ruby">title&#125;</span>	// =&gt; &lt;title&gt;welcome 根号三的博客&lt;/title&gt;</span><br><span class="line">  body</span><br><span class="line">    a(href='#&#123;<span class="ruby">href&#125;</span>', title='#&#123;<span class="ruby">title&#125;</span>') #&#123;<span class="ruby">href&#125;</span>		// =&gt; &lt;a href="sqrtthree.com" title="根号三的博客"&gt;sqrtthree.com&lt;/a&gt;</span><br><span class="line">    p #&#123;<span class="ruby">cont&#125;</span>		// =&gt; &lt;p&gt;我可耻，我打了个硬广。^_^&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="2、Jade_中的注释">2、<code>Jade</code> 中的注释</h2><p>变量一多，我们就难免会忘记他们的含义，为了便于后期维护，我们的好习惯是给他们都加上注释方便理解。</p>
<p>单行注释和 JavaScript 里是一样的，通过 <code>//</code> 来开始，并且必须为单独一行哟~<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// just some example		// =&gt; <span class="comment">&lt;!-- just some example--&gt;</span></span><br><span class="line">p just some example		// =&gt; <span class="tag">&lt;<span class="title">p</span>&gt;</span>just some example<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>Jade</code> 同样支持不输出的注释，只需要加一个横线 <code>-</code> 就好了<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//- just some example</span></span><br><span class="line"><span class="tag">p</span> just some example		<span class="comment">// =&gt; &lt;p&gt;just some example&lt;/p&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果我们需要多行注释的话，使用下面的块注释也是极好的<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.box</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">    <span class="tag">h1</span> this is <span class="tag">a</span> demo.</span><br><span class="line">    <span class="tag">p</span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure><br>编译结果是这样的：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span><br><span class="line">  h1 this is a demo.</span><br><span class="line">  p this is a paragraph.</span><br><span class="line">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3、流程控制">3、流程控制</h2><p>有了变量，我们就可以做很多事情。比如像下面这样：<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- <span class="built_in">var</span> <span class="built_in">data</span> = &#123;<span class="string">"name"</span>: <span class="string">"sqrtthree"</span>,<span class="string">"age"</span>: <span class="number">20</span>&#125;;</span><br><span class="line"></span><br><span class="line">- f<span class="subst">or</span> ( <span class="built_in">var</span> attr <span class="keyword">in</span> <span class="built_in">data</span>)</span><br><span class="line">  p= <span class="string">'my '</span> + attr + <span class="string">' is '</span> + <span class="built_in">data</span><span class="preprocessor">[</span>attr<span class="preprocessor">]</span><span class="markup">ighlight html %&#125;</span></span><br></pre></td></tr></table></figure><br>那么结果是什么样的呢？<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;<span class="keyword">my</span> <span class="property">name</span> <span class="keyword">is</span> sqrtthree&lt;/p&gt;</span><br><span class="line">&lt;p&gt;<span class="keyword">my</span> age <span class="keyword">is</span> <span class="number">20</span>&lt;/p&gt;</span><br></pre></td></tr></table></figure><br>咦，看着怎么这么熟悉呢？没错，就是 <code>js</code> 中遍历 <code>json</code>对象的操作。当然了，下面这种方式也是可以的，结果和上面是一样的<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var data = &#123;<span class="string">"name"</span><span class="symbol">:</span> <span class="string">"sqrtthree"</span>,<span class="string">"age"</span><span class="symbol">:</span> <span class="number">20</span>&#125;;</span><br><span class="line"></span></span><br><span class="line">-<span class="ruby"> <span class="keyword">for</span> ( var attr <span class="keyword">in</span> data)</span><br><span class="line"></span><span class="comment">  //- p= 'my ' + attr + ' is ' + data[attr]</span></span><br><span class="line">  p my #&#123;<span class="ruby">attr&#125;</span> is #&#123;<span class="ruby">data[attr]&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>当然了，除了 <code>for</code> 之外，<code>Jade</code> 还提供了另外一种语法糖<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var data = &#123;<span class="string">"name"</span><span class="symbol">:</span> <span class="string">"sqrtthree"</span>,<span class="string">"age"</span><span class="symbol">:</span> <span class="number">20</span>&#125;;</span><br><span class="line"></span></span><br><span class="line">-<span class="ruby"> each value, keys <span class="keyword">in</span> data</span><br><span class="line"></span><span class="comment">  //- p=keys + ' : ' + value</span></span><br><span class="line">  p #&#123;<span class="ruby">keys&#125;</span> : #&#123;<span class="ruby">value&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>说完了 <code>json</code> 对象，我们来说一说他的好搭档 - 数组<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var skills = [<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'javascript'</span>, <span class="string">'nodejs'</span>];</span><br><span class="line"></span></span><br><span class="line">ul</span><br><span class="line">  -<span class="ruby"> each skill <span class="keyword">in</span> skills</span><br><span class="line"></span>    li #&#123;<span class="ruby">skill&#125;</span></span><br></pre></td></tr></table></figure><br>编译结果是这个样子的<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>html<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>css<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>nodejs<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><br>什么？太简单了？那我们来点复杂的<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var data = [&#123;<span class="symbol">id:</span> <span class="number">1</span>,<span class="symbol">skills:</span> [<span class="string">'html'</span>, <span class="string">'css'</span>]&#125;,&#123;<span class="symbol">id:</span> <span class="number">2</span>,<span class="symbol">skills:</span> [<span class="string">'javascript'</span>,<span class="string">'nodejs'</span>]&#125;];</span><br><span class="line"></span></span><br><span class="line">dl</span><br><span class="line">  -<span class="ruby"> each list <span class="keyword">in</span> data</span><br><span class="line"></span>    dt #&#123;<span class="ruby">list.id&#125;</span></span><br><span class="line">    -<span class="ruby"> each item <span class="keyword">in</span> list.skills</span><br><span class="line"></span>      dd #&#123;<span class="ruby">item&#125;</span></span><br></pre></td></tr></table></figure><br>结果是这样的<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dt</span>&gt;</span>1<span class="tag">&lt;/<span class="title">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dd</span>&gt;</span>html<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dd</span>&gt;</span>css<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dt</span>&gt;</span>2<span class="tag">&lt;/<span class="title">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dd</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">dd</span>&gt;</span>nodejs<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dl</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>说完了 <code>for</code> &amp; <code>each</code> 语句，我们还有 <code>while</code> 语句呢，比如我们要输出5个 <code>li</code>，我们可以这么写：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">var</span> <span class="keyword">n</span> = 0;</span><br><span class="line"></span><br><span class="line">ul</span><br><span class="line">  <span class="keyword">while</span> <span class="keyword">n</span> &lt; 5</span><br><span class="line">    <span class="keyword">li</span>=<span class="keyword">n</span>++</span><br></pre></td></tr></table></figure><br>结果很明显：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>0<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="4、条件判断">4、条件判断</h2><p>关于<code>if else</code>，我们可以这样用<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var onOff = <span class="keyword">true</span>;</span><br><span class="line"></span>-<span class="ruby"> var data = [<span class="string">'html'</span>,<span class="string">'css'</span>,<span class="string">'javascript'</span>]</span><br><span class="line"></span></span><br><span class="line">ul</span><br><span class="line">  if onOff</span><br><span class="line">    -<span class="ruby">each skills <span class="keyword">in</span> data</span><br><span class="line"></span>      li=skills</span><br><span class="line">  else</span><br><span class="line">    li none</span><br></pre></td></tr></table></figure><br>当 <code>onOff</code> 变量为真时，结果为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>html<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>css<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><br>当 <code>onOff</code> 变量为假时，结果为<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;ul&gt;</span></span><br><span class="line">  <span class="variable">&lt;li&gt;</span><span class="keyword">none</span><span class="variable">&lt;/li&gt;</span></span><br><span class="line"><span class="variable">&lt;/ul&gt;</span></span><br></pre></td></tr></table></figure><br>又见语法糖，<code>Jade</code> 默认是支持 <code>unless</code> 的，那么问题来了，<code>unless</code> 究竟是个什么东东呢？<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> var onOff = <span class="keyword">true</span>;</span><br><span class="line"></span>-<span class="ruby"> var data = [<span class="string">'html'</span>,<span class="string">'css'</span>,<span class="string">'javascript'</span>]</span><br><span class="line"></span></span><br><span class="line">ul</span><br><span class="line">  unless !onOff</span><br><span class="line">    -<span class="ruby">each skills <span class="keyword">in</span> data</span><br><span class="line"></span>      li=skills</span><br><span class="line">  else</span><br><span class="line">    li none</span><br></pre></td></tr></table></figure><br>从上面的代码中，我们可以看出，<code>unless</code> 实际上就是 <code>if ( !(expr) )</code> 的等价方式.</p>
<p>下面我们谈谈 <code>case</code> &amp; <code>when</code> 的用法，编译结果我就不写了，大家可以自行测试。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">var</span> data = <span class="string">'jser'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> data</span><br><span class="line">  <span class="keyword">when</span> <span class="string">'jser'</span></span><br><span class="line">    p Hello, jser.</span><br><span class="line">  <span class="keyword">when</span> <span class="string">'weber'</span></span><br><span class="line">    p Hello, weber.</span><br><span class="line">  <span class="keyword">default</span></span><br><span class="line">    p Hello, <span class="preprocessor">#&#123;data&#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>文章首发于前端乱炖社区, 现在搬迁过来了. <a href="http://www.html-js.com/article/2585">http://www.html-js.com/article/2585</a></p>
</blockquote>
<p>前面介绍了一些 <code>Jade</code> 的简单用法，这篇文章为大家讲一下 <code>Jade</code> 中如何进行数据的动态传递和流程控制，干货来咯~</p>
<h2 id="1、Jade_中简单的变量定义和使用">1、<code>Jade</code> 中简单的变量定义和使用</h2><p>我们在写 <code>html</code> 静态页面的过程中，免不了会碰到一些需要动态注入的地方，一般的写法就略显麻烦，那么我们有了 <code>Jade</code> 之后呢，不啰嗦了，我们从最简单的例子开始：</p>]]>
    
    </summary>
    
      <category term="jade" scheme="http://blog.sqrtthree.com/tags/jade/"/>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端开发模板引擎 -- Jade之标签的基本写法]]></title>
    <link href="http://blog.sqrtthree.com/2015/08/20/jade-02/"/>
    <id>http://blog.sqrtthree.com/2015/08/20/jade-02/</id>
    <published>2015-08-20T07:52:51.000Z</published>
    <updated>2015-08-20T07:52:51.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>文章首发于前端乱炖社区, 现在搬迁过来了. <a href="http://www.html-js.com/article/2575" target="_blank" rel="external">http://www.html-js.com/article/2575</a></p>
</blockquote>
<h2 id="1、文档声明">1、文档声明</h2><p>我们在开始写一个 <code>html</code> 页面的时候，首先要写上 <code>DOCTYPE</code> 文档声明的，现在通常情况下我们都是采用 <code>HTML5</code> 的文档声明方式，那么在 <code>jade</code> 里面我们应该怎么写呢？</p>
<p>在 <code>jade</code> 里面编写文档声明有2种方式：</p>
<ol>
<li>我们可以直接在 <code>jade</code> 文件里面写 <code>doctype html</code> 即可</li>
<li><code>jade</code> 为我们提供了一个简单的写法，<code>!!! 5</code> (不过好像 <code>jade</code> 在升级之后的新版本中不推荐使用此方法了 -_-)</li>
</ol>
<a id="more"></a>
<p>当然，<code>jade</code> 还默认支持其他类型的文档声明，只需要使用 <code>doctype</code> 跟上下面的选项即可。<code>jade</code> 默认支持的有:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var doctypes = exports.doctypes = &#123;</span><br><span class="line">    '5': '<span class="doctype">&lt;!DOCTYPE html&gt;</span>',</span><br><span class="line">    'xml': '<span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>',</span><br><span class="line">    'default': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>',</span><br><span class="line">    'transitional': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>',</span><br><span class="line">    'strict': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span>',</span><br><span class="line">    'frameset': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"&gt;</span>',</span><br><span class="line">    '1.1': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</span>',</span><br><span class="line">    'basic': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"&gt;</span>',</span><br><span class="line">    'mobile': '<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd"&gt;</span>'</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>doctype</code> 对大小写是不敏感的, 所以下面两个是一样的效果:<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doctype <span class="keyword">Default</span></span><br><span class="line">doctype <span class="keyword">default</span></span><br></pre></td></tr></table></figure></p>
<p>例如：如果我们要想写 <code>XHTML 1.0 Strict</code> 文档声明，则可以这样写：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">doctype</span> strict</span><br></pre></td></tr></table></figure></p>
<p>编译结果如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2、标签">2、标签</h2><p><code>jade</code> 中的标签的写法非常的简单，就是一个单词。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doctype <span class="tag">html</span></span><br><span class="line"><span class="tag">html</span></span><br><span class="line">  head</span><br><span class="line">    title</span><br><span class="line">  body</span><br></pre></td></tr></table></figure>
<p>以上代码会被编译成:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong><code>jade</code> 是以严格的缩进来区分标签的开始和结束的，默认为2个空格表示缩进。</strong></p>
<p>如果我们要写一个标签并且带有内容，比如说要写一个标题，我们只需要在标签单词后面加一个空格，然后跟上内容即可。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h1</span> this is <span class="tag">a</span> title.</span><br><span class="line"><span class="tag">p</span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure>
<p>编译结果为：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;<span class="keyword">this</span> <span class="keyword">is</span> a title.&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;<span class="keyword">this</span> <span class="keyword">is</span> a paragraph.&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>有的时候，我们会需要输出一些特殊排版格式的文本或者是为了提高代码的阅读性，需要显示出如下的效果：<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;p&gt;</span></span><br><span class="line">  <span class="keyword">1</span>. 001</span><br><span class="line">  <span class="keyword">2</span>. 002</span><br><span class="line">  <span class="keyword">3</span>. 003</span><br><span class="line">  <span class="keyword">4</span>. 004</span><br><span class="line"><span class="tag">&lt;/p&gt;</span></span><br></pre></td></tr></table></figure><br>那么我们在 jade 中应该怎么写呢，这里 jade 给我们提供了两种方式，第一种是在每一行前面加上一个 <code>|</code> 和<code>空格</code>：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p</span><br><span class="line">  | <span class="number">1.</span> <span class="number">001</span></span><br><span class="line">  | <span class="number">2.</span> <span class="number">002</span></span><br><span class="line">  | <span class="number">3.</span> <span class="number">003</span></span><br><span class="line">  | <span class="number">4.</span> <span class="number">004</span></span><br></pre></td></tr></table></figure><br>第二种方法是：在标签名后面紧跟一个 <code>.</code> 号。则此标签下面的内容会被 <code>jade</code> 解析为一个代码段：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p.</span><br><span class="line">  <span class="number">1.</span> <span class="number">001</span></span><br><span class="line">  <span class="number">2.</span> <span class="number">002</span></span><br><span class="line">  <span class="number">3.</span> <span class="number">003</span></span><br><span class="line">  <span class="number">4.</span> <span class="number">004</span></span><br></pre></td></tr></table></figure></p>
<p>这下有的同学就傻傻分不清了，这两种方式到底有什么区别呢？这里我们就不得不说到标签混排，如果我们有这样一个需求，在上面的代码中 <code>1</code> 的后面需要加一个 <code>strong</code> 标签。</p>
<p>首先我们说第一种情况下，我们的写法：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p</span><br><span class="line">  | <span class="number">1.</span> <span class="number">001</span></span><br><span class="line">  strong aaa</span><br><span class="line">  | <span class="number">2.</span> <span class="number">002</span></span><br><span class="line">  | <span class="number">3.</span> <span class="number">003</span></span><br><span class="line">  | <span class="number">4.</span> <span class="number">004</span></span><br></pre></td></tr></table></figure></p>
<p>如果是第二种写法的话，我们就需要这样写：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p.</span><br><span class="line">  1. 001</span><br><span class="line">  <span class="tag">&lt;<span class="title">strong</span>&gt;</span>aaa<span class="tag">&lt;/<span class="title">strong</span>&gt;</span></span><br><span class="line">  2. 002</span><br><span class="line">  3. 003</span><br><span class="line">  4. 004</span><br></pre></td></tr></table></figure></p>
<p>编译结果如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span></span><br><span class="line">  1. 001</span><br><span class="line">  <span class="tag">&lt;<span class="title">strong</span>&gt;</span>aaa<span class="tag">&lt;/<span class="title">strong</span>&gt;</span></span><br><span class="line">  2. 002</span><br><span class="line">  3. 003</span><br><span class="line">  4. 004</span><br><span class="line"><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3、标签的属性和属性值">3、标签的属性和属性值</h2><p><code>h1</code> <code>p</code> 等等这些标签，我们通常都会给他们写上<code>id</code> &amp; <code>class</code>属性的，那么这在 <code>jade</code> 中应该怎么写呢？和 <code>zen coding</code> 的语法一样，我们只需要这样写：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h1<span class="id">#id</span><span class="class">.class</span> this is <span class="tag">a</span> title.</span><br><span class="line">p<span class="id">#j-text</span><span class="class">.text</span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure>
<p>编译结果为：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id=<span class="string">"id"</span> <span class="keyword">class</span>=<span class="string">"class"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a title.&lt;/h1&gt;</span><br><span class="line">&lt;p id=<span class="string">"j-text"</span> <span class="keyword">class</span>=<span class="string">"text"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a paragraph.&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>等等，那我要是想添加多个 <code>class</code> 怎么办呢？这样办：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h1<span class="id">#id</span><span class="class">.class1</span><span class="class">.class2</span><span class="class">.class3</span> this is <span class="tag">a</span> title.</span><br><span class="line">p<span class="id">#j-text</span><span class="class">.text</span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure><br>编译结果为：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id=<span class="string">"id"</span> <span class="keyword">class</span>=<span class="string">"class1 class2 class3"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a title.&lt;/h1&gt;</span><br><span class="line">&lt;p id=<span class="string">"j-text"</span> <span class="keyword">class</span>=<span class="string">"text"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a paragraph.&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>什么？写 <code>div</code> 写烦了？那就不写咯。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#id</span><span class="class">.class</span></span><br><span class="line"><span class="id">#id</span><span class="class">.class1</span><span class="class">.class2</span> this is <span class="tag">a</span> <span class="tag">div</span> without tags.</span><br></pre></td></tr></table></figure><br>编译结果为：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="property">id</span>=<span class="string">"id"</span> <span class="type">class</span>=<span class="string">"class"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">&lt;<span class="keyword">div</span> <span class="property">id</span>=<span class="string">"id"</span> <span class="type">class</span>=<span class="string">"class1 class2"</span>&gt;this <span class="keyword">is</span> a <span class="keyword">div</span> <span class="keyword">without</span> tags.&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>这里要说明一下，在 <code>jade</code> 的语法里面，只有 <code>div</code> 标签能够省略不写.</strong></p>
<p>说完了 <code>id</code> 和 <code>class</code>，我们再来说一下标签其他的属性应该怎么添加。<code>jade</code> 里添加其他属性和值的语法也和 <code>zen coding</code> 类似，我们需要在标签后面加上小括号<code>()</code>，然后按照<code>(属性名=属性值)</code>的格式写就好了，如果有多个属性，中间以逗号进行分割。</p>
<p>比如上面的 id 和 class 的写法我们就可以改写成：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">h1</span><span class="params">(id=<span class="string">"id"</span>, class=<span class="string">"class"</span>)</span></span> this is <span class="tag">a</span> title.</span><br><span class="line"><span class="function"><span class="title">p</span><span class="params">(id=<span class="string">"j-text"</span>, class=<span class="string">"text"</span>)</span></span> this is <span class="tag">a</span> paragraph.</span><br></pre></td></tr></table></figure><br>结果是一样的：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id=<span class="string">"id"</span> <span class="keyword">class</span>=<span class="string">"class"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a title.&lt;/h1&gt;</span><br><span class="line">&lt;p id=<span class="string">"j-text"</span> <span class="keyword">class</span>=<span class="string">"text"</span>&gt;<span class="keyword">this</span> <span class="keyword">is</span> a paragraph.&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
<p>说来说去还是这两个属性，烦了？那我们换一个吧：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">a</span><span class="params">(herf=<span class="string">"/index.html"</span>, title=<span class="string">"this is a link."</span>, target=<span class="string">"_blank"</span>, data-uid=<span class="string">"1000"</span>)</span></span> index.html</span><br></pre></td></tr></table></figure><br>编译结果为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">herf</span>=<span class="value">"/index.html"</span> <span class="attribute">title</span>=<span class="value">"this is a link."</span> <span class="attribute">target</span>=<span class="value">"_blank"</span> <span class="attribute">data-uid</span>=<span class="value">"1000"</span>&gt;</span>index.html<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>那么问题就来了，如果我们要写一个单属性应该怎么写？比如给表单元素添加 <code>checked</code>属性：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">input</span><span class="params">(type=<span class="string">"checkbox"</span>, name=<span class="string">"all"</span>, checked, value=<span class="string">"全选"</span>)</span></span></span><br></pre></td></tr></table></figure><br>编译结果为：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"all"</span> <span class="keyword">checked</span>=<span class="string">"checked"</span> <span class="keyword">value</span>=<span class="string">"全选"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[写一些我所知道的 jade 语法]]>
    
    </summary>
    
      <category term="jade" scheme="http://blog.sqrtthree.com/tags/jade/"/>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端开发模板引擎 -- Jade之开篇]]></title>
    <link href="http://blog.sqrtthree.com/2015/08/20/jade-01/"/>
    <id>http://blog.sqrtthree.com/2015/08/20/jade-01/</id>
    <published>2015-08-20T07:19:56.000Z</published>
    <updated>2015-08-20T07:19:56.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>文章首发于前端乱炖社区, 现在搬迁过来了. <a href="http://www.html-js.com/article/2570" target="_blank" rel="external">http://www.html-js.com/article/2570</a></p>
</blockquote>
<p>随着 web 发展，前端应用变得越来越复杂，基于后端的 <code>javascript(Node.js)</code> 也开始崭露头角，此时  <code>javascript</code> 被寄予了更大的期望，与此同时 <code>javascript MVC</code> 思想也开始流行起来。为了使用户界面与业务数据（内容）分离，就产生了『模板引擎』这个概念。</p>
<p>说的简单点，模板引擎就是一个字符串中有几个变量待定，通过模板引擎函数把数据动态的塞进去。</p>
<p>今天我们就来聊一聊 <code>Jade</code> 的使用方法和语法说明。<code>Jade</code>官网：<a href="http://jade-lang.com/" target="_blank" rel="external">jade-lang.com/</a></p>
<a id="more"></a>
<h2 id="Jade_的使用和命令行工具构建方法">Jade 的使用和命令行工具构建方法</h2><p>Jade 的使用需要依赖 <code>Node</code>环境，通过 <code>npm</code> 包进行安装 <code>Jade</code> 命令行工具，安装成功之后就可以新建一个文件，文件后缀名为 <code>*.jade</code>。我们就可以尽情的使用 <code>jade</code> 的语法咯，写完之后只需要通过命令行工具进行编译即可编译为我们平时使用的 <code>html</code> 静态文件。</p>
<h3 id="安装方法">安装方法</h3><p>1.首先确定是否安装有 <code>Node</code> 环境和 <code>npm</code> 工具，查看方法如下</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在命令行工具中执行如下代码：</span><br><span class="line">node -v</span><br><span class="line">=&gt; v0<span class="number">.10</span><span class="number">.35</span></span><br><span class="line">npm -v</span><br><span class="line">=&gt; <span class="number">1.4</span><span class="number">.28</span></span><br><span class="line"><span class="comment">// 如果成功返回版本号信息即为安装成功。</span></span><br></pre></td></tr></table></figure>
<p>2.通过 <code>npm</code> 全局安装 <code>Jade</code> 命令行工具</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> jade -<span class="keyword">g</span></span><br><span class="line"></span><br><span class="line">// mac用户可能需要管理员权限，使用如下命令</span><br><span class="line">sudo npm <span class="keyword">install</span> jade -<span class="keyword">g</span></span></span><br></pre></td></tr></table></figure>
<p>3.创建 <code>*.Jade</code> 文件，开始任务。</p>
<p>4.通过使用 <code>Jade</code> 命令行工具将 <code>jade</code> 文件编译为 <code>html</code> 文件</p>
<h3 id="Jade_命令行工具使用方法">Jade 命令行工具使用方法</h3><p>我们可以通过 <code>jade --help</code> 查看 <code>Jade</code> 命令行工具的使用参数</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">jade <span class="comment">--help</span></span><br><span class="line"></span><br><span class="line">Usage: jade [options] [dir|<span class="type">file</span> ...]</span><br><span class="line"></span><br><span class="line">  Options:</span><br><span class="line"></span><br><span class="line">    -h, <span class="comment">--help         output usage information / 输出使用信息</span></span><br><span class="line">    -V, <span class="comment">--version      output the version number / 输出版本号信息</span></span><br><span class="line">    -O, <span class="comment">--obj &lt;str&gt;    javascript options object / 传输到 jade 文件中的数据对象</span></span><br><span class="line">    -o, <span class="comment">--out &lt;dir&gt;    output the compiled html to &lt;dir&gt; / 输出编译后的 HTML 到 &lt;dir&gt;</span></span><br><span class="line">    -p, <span class="comment">--path &lt;path&gt;  filename used to resolve includes / 在处理 stdio 时，查找包含文件时的查找路径</span></span><br><span class="line">    -P, <span class="comment">--pretty       compile pretty html output / 格式化编译 html 文件</span></span><br><span class="line">    -c, <span class="comment">--client       compile function for client-side runtime.js / 编译浏览器端可用的 runtime.js</span></span><br><span class="line">    -n, <span class="comment">--name &lt;str&gt;   The name of the compiled template (requires --client) / 编译模板的名字</span></span><br><span class="line">    -D, <span class="comment">--no-debug     compile without debugging (smaller functions) / 关闭编译的调试选项(函数会更小)</span></span><br><span class="line">    -w, <span class="comment">--watch        watch files for changes and automatically re-render / 监听文件改变并自动刷新编译结果</span></span><br><span class="line">    <span class="comment">--name-after-file  Name the template after the last section of the file path (requires --client and overriden by --name)</span></span><br><span class="line">    <span class="comment">--doctype &lt;str&gt;    Specify the doctype on the command line (useful if it is not specified by the template) / 在命令行中指定文档类型(如果在模板中没有被指定)</span></span><br><span class="line"></span><br><span class="line">  Examples:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 编译整个目录</span></span><br><span class="line">    $ jade templates</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 生成 &#123;foo,bar&#125;.html</span></span><br><span class="line">    $ jade &#123;foo,bar&#125;.jade</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 在标准IO下使用jade</span></span><br><span class="line">    $ jade &lt; <span class="keyword">my</span>.jade &gt; <span class="keyword">my</span>.html</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 在标准IO下使用jade</span></span><br><span class="line">    $ echo 'h1 Jade!' | jade</span><br><span class="line"></span><br><span class="line">    <span class="comment"># foo, bar 目录渲染到 /tmp</span></span><br><span class="line">    $ jade foo bar <span class="comment">--out /tmp</span></span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比如说我们需要编译index.jade文件，默认编译到同文件夹下的同名html 文件中</span></span><br><span class="line">jade index<span class="class">.jade</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果我们要格式化输出 index.html 文件，只需要添加 -P 参数即可</span></span><br><span class="line">jade -P index<span class="class">.jade</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果我们要实现监听和自动编译，需要使用 -w 参数</span></span><br><span class="line">jade -P -w index.jade</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="您的鼓励是作者写作最大的动力">您的鼓励是作者写作最大的动力</h2><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨小额赞助我一下，让我有动力继续写出高质量的文章：我的支付宝账号是 <code>sqrtthree@foxmail.com</code>, <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" target="_blank" rel="external">点击查看二维码</a></p>
]]></content>
    <summary type="html">
    <![CDATA[写一些我所知道的 jade 语法]]>
    
    </summary>
    
      <category term="jade" scheme="http://blog.sqrtthree.com/tags/jade/"/>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://blog.sqrtthree.com/2015/06/27/hello-world/"/>
    <id>http://blog.sqrtthree.com/2015/06/27/hello-world/</id>
    <published>2015-06-27T12:30:41.000Z</published>
    <updated>2015-06-27T12:30:41.000Z</updated>
    <content type="html"><![CDATA[<h2 id="About_Me">About Me</h2><p>I’m a Front-End developer in everywhere, now living in ZhengZhou, China.</p>
<p>I’m ❤  programming &amp; Front-end design.</p>
<h2 id="Skills">Skills</h2><ul>
<li>HTML5&amp;CSS3    <code>*****</code></li>
<li>Javascript    <code>********</code></li>
<li>Nodejs        <code>**</code></li>
</ul>
<h2 id="Tools">Tools</h2><ul>
<li>mac &amp; vim</li>
</ul>
<h2 id="Contact_Me">Contact Me</h2><ul>
<li>E-mail:    <a href="mailto:sqrtthree@foxmail.com" target="_blank" rel="external">sqrtthree@foxmail.com</a></li>
<li>Github:    <a href="https://github.com/sqrthree" target="_blank" rel="external">@sqrthree</a></li>
<li>Twitter:    <a href="https://twitter.com/sqrtthree" target="_blank" rel="external">@sqrtthree</a></li>
<li>Weibo:    <a href="http://weibo.com/sqrtthree" target="_blank" rel="external">@sqrtthree</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="About_Me">About Me</h2><p>I’m a Front-End developer in everywhere, now living in ZhengZhou, China.</p>
<p>I’m ❤  programming &amp; F]]>
    </summary>
    
  </entry>
  
</feed>
